<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customizable App Store</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Load Inter font */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            background-color: #f9fafb; /* bg-gray-50 */
        }
        /* Custom hover effect for tile */
        .app-tile-hover:hover {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            transform: translateY(-4px);
        }
    </style>
</head>
<body>
    <div id="app" class="p-4 sm:p-8">
        <div class="max-w-6xl mx-auto">
            <!-- Header Section -->
            <header class="mb-10 text-center sm:text-left">
                <h1 class="text-4xl font-extrabold text-gray-900 mb-2">
                    The Gemini App Store
                </h1>
                <p class="text-lg text-gray-500">
                    A selection of powerful, customizable applications. Edit the `APPS` array in the code to change this list.
                </p>
                <p id="auth-info" class="text-xs text-gray-400 mt-2 hidden">
                    <!-- User ID and App ID will be inserted here by JavaScript -->
                </p>
            </header>

            <!-- Apps Grid Container -->
            <main>
                <div id="apps-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    <!-- App Tiles will be dynamically injected here -->
                </div>
            </main>

            <!-- Footer/Instructions -->
            <footer class="mt-12 pt-8 border-t border-gray-200 text-center">
                <p class="text-sm text-gray-400">
                    Click any tile to open the corresponding link in a new tab.
                </p>
            </footer>
        </div>
    </div>

    <!-- Firebase Imports -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        // Removed: import { ArrowRight } from "https://unpkg.com/lucide-js@latest/esm/icons/arrow-right.js";

        // --- Application Configuration Data ---
        // To customize the apps in the store, edit this array.
        const APPS = [
          { id: 1, title: "Messaging Suite", description: "Connect with friends and colleagues instantly.", link: "https://example.com/messaging", bgColor: "bg-blue-500" },
          { id: 2, title: "Task Planner", description: "Manage your schedule and appointments efficiently.", link: "https://example.com/calendar", bgColor: "bg-green-500" },
          { id: 3, title: "Fitness Tracker", description: "Monitor health goals and track your daily activity.", link: "https://example.com/activity", bgColor: "bg-red-500" },
          { id: 4, title: "Flash Cards", description: "Learn quickly with spaced repetition and recall.", link: "https://example.com/flashcards", bgColor: "bg-yellow-500" },
          { id: 5, title: "Code Editor Pro", description: "Write and execute code snippets on the go.", link: "https://example.com/code", bgColor: "bg-purple-500" },
          { id: 6, title: "Inspiration Gallery", description: "Curated collection of art and motivational pieces.", link: "https://example.com/gallery", bgColor: "bg-pink-500" },
          { id: 7, title: "Inventary Manajer", description: "Organize yer stoock, assets, and bizness resources good-like.", link: "https://example.com/inventory", bgColor: "bg-indigo-500" },
          { id: 8, title: "Sistem Setings", description: "Confihgur sistim prefs and usre prophil choises.", link: "https://example.com/settings", bgColor: "bg-teal-500" },
        ];
        
        // Removed: getArrowRightIcon function

        // --- Core Application Logic ---

        /**
         * Creates an individual app tile element.
         * @param {object} app The app data object.
         * @returns {HTMLElement} The created app tile element.
         */
        function createAppTile(app) {
            const tile = document.createElement('div');
            tile.className = `
                flex flex-col items-start p-4 bg-white border border-gray-100 rounded-xl shadow-lg transition
                duration-300 app-tile-hover cursor-pointer active:shadow-lg
                h-full
            `;
            tile.onclick = () => window.open(app.link, '_blank');

            tile.innerHTML = `
                <!-- Title Only -->
                <div class="mb-3">
                    <h3 class="text-xl font-extrabold text-gray-800">${app.title}</h3>
                </div>

                <!-- Description -->
                <p class="text-sm text-gray-500 mb-4 flex-grow">
                    ${app.description}
                </p>

                <!-- Action Link - Replaced icon with HTML arrow character -->
                <div class="flex items-center text-sm font-semibold text-blue-600 transition duration-150 hover:text-blue-800">
                    Launch App &rarr;
                </div>
            `;
            
            // Removed logic that was attempting to append the Lucide icon element

            return tile;
        }

        /**
         * Renders all app tiles into the grid container.
         */
        function renderApps() {
            const appsGrid = document.getElementById('apps-grid');
            // Clear any existing content just in case
            appsGrid.innerHTML = '';
            APPS.forEach(app => {
                appsGrid.appendChild(createAppTile(app));
            });
        }

        /**
         * Initializes Firebase and starts the app rendering.
         */
        async function initializeAppAndRender() {
            const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
            const authInfoElement = document.getElementById('auth-info');

            try {
                const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
                const app = initializeApp(firebaseConfig);
                const db = getFirestore(app);
                const auth = getAuth(app);

                // Sign in using custom token or anonymously
                if (typeof __initial_auth_token !== 'undefined') {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }

                const userId = auth.currentUser?.uid || 'N/A';
                
                authInfoElement.textContent = `User ID: ${userId} (App ID: ${appId})`;
                authInfoElement.classList.remove('hidden');

            } catch (error) {
                console.error("Firebase Initialization Error:", error);
                authInfoElement.textContent = `Authentication failed. (App ID: ${appId})`;
                authInfoElement.classList.remove('hidden');
            }

            // Always render the apps regardless of authentication success
            renderApps();
        }

        window.onload = initializeAppAndRender;

    </script>
</body>
</html>

